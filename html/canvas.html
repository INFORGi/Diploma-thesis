<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval'; img-src 'self' data: blob:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://unpkg.com; style-src 'self' 'unsafe-inline';">    
    
    <title>Рабочая область</title>
    
    <link rel="stylesheet" href="../css/canvasStyle.css">
    <link rel="stylesheet" href="../css/menuStyle.css">
    <link rel="stylesheet" href="../css/themeStyle.css">
    <link rel="stylesheet" href="../lib/jsmind/style/jsmind.css">
    <link rel="stylesheet" href="../css/styleMenu.css">

    <script type="module" src="../js/canvas.js"></script>
    <script type="module" src="../data/constants.js"></script>
    <script type="module" src="../lib/jsmind/js/jsmind.js"></script>
</head>
<body class="entry-point">
    <div class="window entry-point">
        <header id="title-bar" class="entry-point">
            <div style="position: relative;">
                <button id="menu-button" class="style-button-menu entry-point">⋮</button>
                <div id="div-dropdown" class="style-dropdown entry-point">
                    <div>
                        <button id="theme-button" class="dropdown-button-style button-transform entry-point">Темы приложения</button>
                        <div id="theme-switch-menu" class="theme-dropdown entry-point">
                            <button class="dropdown-button-style button-transform entry-point" id="button-swith-theme-light" data-value="light">Светлая тема</button>
                            <button class="dropdown-button-style button-transform entry-point" id="button-swith-theme-dark" data-value="dark">Темная тема</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div>
                <button class="button-minimize-style entry-point" id="minimize" aria-label="Minimize"></button>
                <button class="button-maximize-style entry-point" id="maximize" aria-label="Maximize"></button>   
                <button class="button-close-style entry-point" id="close" aria-label="Close"></button>
            </div>
        </header>
        <main class="entry-point">
            <div class="side-toolbar entry-point">
                <button id="back-button" class="side-button entry-point" title="Вернуться на главную">
                    <img src="../image/back_window.svg" alt="Назад">
                </button>
            </div>
            
            <div class="canvas entry-point">
                <div id="jsmind_container" class="jsmind-container"></div>
                
                <!-- Меню для работы с узлом -->
                <div id="node-actions-menu" class="context-menu" style="display: none;">
                    <button class="menu-btn" data-action="add-child">Добавить</button>
                    <button class="menu-btn" data-action="remove">Удалить</button>
                    <button class="menu-btn" data-action="show-text-menu">Стиль текста</button>
                    <button class="menu-btn" data-action="show-node-menu">Стиль блока</button>
                    <button class="menu-btn" data-action="show-line-menu">Стиль линии</button>
                </div>

                <!-- Меню стилей текста -->
                <div id="text-style-menu" class="context-menu" style="display: none;">
                    <div class="style-group">
                        <input type="color" id="textColor" title="Цвет текста">
                        <button class="style-btn" data-style="bold">B</button>
                        <button class="style-btn" data-style="italic">I</button>
                        <button class="style-btn" data-style="underline">U</button>
                    </div>
                </div>

                <!-- Меню стилей блока -->
                <div id="node-style-menu" class="context-menu" style="display: none;">
                    <div class="style-group">
                        <input type="color" id="nodeBgColor" title="Цвет фона">
                        <input type="color" id="nodeBorderColor" title="Цвет границы">
                    </div>
                    <div class="shape-group">
                        <button class="shape-btn" data-shape="RECTANGLE">Прямоугольник</button>
                        <button class="shape-btn" data-shape="TRAPEZOID">Трапеция</button>
                        <button class="shape-btn" data-shape="SKEWED_RECTANGLE">Скошенный</button>
                        <button class="shape-btn" data-shape="NOTCHED_RECTANGLE">С вырезом</button>
                    </div>
                </div>

                <!-- Меню стилей линии -->
                <div id="line-style-menu" class="context-menu" style="display: none;">
                    <button class="line-btn" data-line="STRAIGHT">Прямая</button>
                    <button class="line-btn" data-line="CURVED">Изогнутая</button>
                    <button class="line-btn" data-line="BEZIER">Безье</button>
                </div>
            </div>
        </main>
    </div>
</body>
</html>
