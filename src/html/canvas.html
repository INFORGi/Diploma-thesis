<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' data: blob:; script-src 'self'; style-src 'self' 'unsafe-inline';">    
    
    <title>Рабочая область</title>
    
    <link rel="stylesheet" href="../css/canvasStyle.css">
    <link rel="stylesheet" href="../css/menuStyle.css">
    <link rel="stylesheet" href="../css/themeStyle.css">
    <link rel="stylesheet" href="../lib/jsmind/style/jsmind.css">

    <script type="module" src="../js/canvas.js"></script>
    <script type="module" src="../data/constants.js"></script>
    <script type="module" src="../lib/jsmind/js/jsmind.js"></script>
</head>
<body class="entry-point">
    <div class="window entry-point">
        <header id="title-bar" class="entry-point">
            <div style="position: relative; user-select: none;">
                <button id="menu-button" class="style-button-menu entry-point">⋮</button>
                <div id="div-dropdown" class="style-dropdown entry-point">
                    <div class="dropdown-item">
                        <button id="theme-button" class="dropdown-button-style button-transform entry-point">
                            <span class="dropdown-item-text">Темы приложения</span>
                        </button>
                        <div id="theme-switch-menu" class="theme-dropdown entry-point">
                            <button class="dropdown-button-style button-transform entry-point" id="button-swith-theme-light" data-value="light">Светлая тема</button>
                            <button class="dropdown-button-style button-transform entry-point" id="button-swith-theme-dark" data-value="dark">Темная тема</button>
                        </div>
                    </div>
                </div>
            </div>
            <div style="user-select: none;">
                <button class="button-minimize-style entry-point" id="minimize" aria-label="Minimize"></button>
                <button class="button-maximize-style entry-point" id="maximize" aria-label="Maximize"></button>   
                <button class="button-close-style entry-point" id="close" aria-label="Close"></button>
            </div>
        </header>
        <main id="main" class="entry-point">
            <div class="side-toolbar entry-point">
                <button id="back-button" class="side-button entry-point" title="Вернуться на главную">
                    <img src="../image/back_window.svg" alt="Назад">
                </button>
            </div>
            <div class="canvas entry-point">
                <div id="jsmind_container" class="jsmind-container"></div>
                <button id="create-node">+</button>
                
                <div class="menu floating-menu entry-point">
                    <!-- Настройки узла -->
                    <div class="menu-section">
                        <button class="menu-section-toggle">Узел ▼</button>
                        <div class="menu-section-content">
                            <label>Форма узла</label>
                            <div class="button-group"></div>
                            
                            <label>Цвет узла</label>
                            <input type="color" id="node-color" value="#ffffff" class="menu-button">
                            
                            <label>Цвет границы</label>
                            <input type="color" id="border-color" value="#000000" class="menu-button">
                            
                            <label>Толщина границы</label>
                            <input type="range" id="border-width" min="1" max="5" value="1" class="menu-button">
                        
                            <label>Ширина узла</label>
                            <input type="number" id="node-width" class="">

                            <label>Высота узла</label>
                            <input type="number" id="node-height" class="">
                        </div>
                    </div>

                    <!-- Настройки линии -->
                    <div class="menu-section">
                        <button class="menu-section-toggle">Линия ▼</button>
                        <div class="menu-section-content">
                            <label>Стиль линии</label>
                            <select id="line-style" class="menu-button">
                                <option value="straight">Прямая</option>
                                <option value="curved">Кривая</option>
                                <option value="bezier">Линия Безье</option>
                                <option value="dashed">Пунктирная</option>
                                <option value="dotted">Точечная</option>
                            </select>
                            
                            <label>Цвет линии</label>
                            <input type="color" id="line-color" value="#666666" class="menu-button">
                            
                            <label>Толщина линии</label>
                            <input type="range" id="line-width" min="1" max="5" value="1" class="menu-button">
                        </div>
                    </div>

                    <!-- Глобальные настройки -->
                    <div class="menu-section">
                        <button class="menu-section-toggle">Карта ▼</button>
                        <div class="menu-section-content">
                            <label>Тип карты</label>
                            <select id="map-type">
                                <option value="mind">Ментальная карта</option>
                                <option value="tree">Дерево</option>
                                <option value="organization">Организационная</option>
                            </select>
                            
                            <label>Масштаб</label>
                            <input type="range" id="map-zoom" min="50" max="200" value="100">

                            <div class="toggle-container">
                                <label for="cascade-delete">Каскадное удаление узлов</label>
                                <input type="checkbox" id="cascade-delete">
                            </div>
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="action-btn" id="expand-all">Развернуть все</button>
                        <button class="action-btn" id="collapse-all">Свернуть все</button>
                    </div>
                </div>
            </div>

            <div id="context-menu" class="context-menu">
                <div class="context-menu-group">
                    <button id="change-block" class="context-menu-button">Изменить блок</button>
                    <div class="context-submenu">
                        <button id="change-p" class="context-menu-item" data-type="p">Параграф</button>
                        <button id="change-h1" class="context-menu-item" data-type="h1">Заголовок 1</button>
                        <button id="change-h2" class="context-menu-item" data-type="h2">Заголовок 2</button>
                        <button id="change-h3" class="context-menu-item" data-type="h3">Заголовок 3</button>
                        <button id="change-ul" class="context-menu-item" data-type="ul">Список</button>
                        <button id="change-ol" class="context-menu-item" data-type="ol">Нумерованный список</button>
                        <button id="change-img" class="context-menu-item" data-type="img">Изображение</button>
                    </div>
                </div>
                <div class="context-menu-group">
                    <button id="add-block" class="context-menu-button">Добавить блок</button>
                    <div class="context-submenu">
                        <button id="add-p" class="context-menu-item" data-type="p">Параграф</button>
                        <button id="add-h1" class="context-menu-item" data-type="h1">Заголовок 1</button>
                        <button id="add-h2" class="context-menu-item" data-type="h2">Заголовок 2</button>
                        <button id="add-h3" class="context-menu-item" data-type="h3">Заголовок 3</button>
                        <button id="add-ul" class="context-menu-item" data-type="ul">Список</button>
                        <button id="add-ol" class="context-menu-item" data-type="ol">Нумерованный список</button>
                        <button id="add-img" class="context-menu-item" data-type="img">Изображение</button>
                    </div>
                </div>
                <button id="delete-block" class="context-menu-button">Удалить блок</button>
            </div>
        </main>
    </div>
</body>
</html>
