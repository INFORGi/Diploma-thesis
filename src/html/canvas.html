<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' data: blob:; script-src 'self'; style-src 'self' 'unsafe-inline';">    
    
    <title>Рабочая область</title>
    
    <link rel="stylesheet" href="../css/canvasStyle.css">
    <link rel="stylesheet" href="../css/menuStyle.css">
    <link rel="stylesheet" href="../css/themeStyle.css">
    <link rel="stylesheet" href="../lib/jsmind/style/jsmind.css">

    <script type="module" src="../js/canvas.js"></script>
    <script type="module" src="../data/constants.js"></script>
    <script type="module" src="../lib/jsmind/js/jsmind.js"></script>
</head>
<body class="entry-point">
    <div class="window entry-point">
        <header id="title-bar" class="entry-point">
            <div style="position: relative; user-select: none;">
                <button id="menu-button" class="style-button-menu entry-point">⋮</button>
                <div id="div-dropdown" class="style-dropdown entry-point">
                    <div class="dropdown-item">
                        <button id="theme-button" class="dropdown-button-style button-transform entry-point">
                            <span class="dropdown-item-text">Темы приложения</span>
                        </button>
                        <div id="theme-switch-menu" class="theme-dropdown entry-point">
                            <button class="dropdown-button-style button-transform entry-point" id="button-swith-theme-light" data-value="light">Светлая тема</button>
                            <button class="dropdown-button-style button-transform entry-point" id="button-swith-theme-dark" data-value="dark">Темная тема</button>
                        </div>
                    </div>
                </div>
            </div>
            <div style="user-select: none;">
                <button class="button-minimize-style entry-point" id="minimize" aria-label="Minimize"></button>
                <button class="button-maximize-style entry-point" id="maximize" aria-label="Maximize"></button>   
                <button class="button-close-style entry-point" id="close" aria-label="Close"></button>
            </div>
        </header>
        <main id="main" class="entry-point">
            <div class="side-toolbar entry-point">
                <button id="back-button" class="side-button entry-point" title="Вернуться на главную">
                    <img src="../image/back_window.svg" alt="Назад">
                </button>
            </div>
            <div class="canvas entry-point">
                <div id="jsmind_container" class="jsmind-container"></div>
                <button id="create-node">+</button>
                
                <div class="menu floating-menu entry-point">
                    <!-- Настройки узла -->
                    <div class="menu-section">
                        <button class="menu-section-toggle">Узел ▼</button>
                        <div class="menu-section-content">
                            <!-- <label>Форма узла</label>
                            <div class="button-group"></div> -->
                            
                            <label>Цвет узла</label>
                            <input type="color" id="node-color" value="#ffffff" class="menu-button">
                            
                            <label>Цвет границы</label>
                            <input type="color" id="border-color" value="#000000" class="menu-button">
                            
                            <label>Толщина границы</label>
                            <input type="range" id="border-width" min="1" max="5" value="1" class="menu-button">
                        
                            <label>Ширина узла</label>
                            <input type="number" id="node-width" class="" min="300">

                            <label>Высота узла</label>
                            <input type="number" id="node-height" class="" min="250">
                        </div>
                    </div>

                    <!-- Настройки линии -->
                    <div class="menu-section">
                        <button class="menu-section-toggle">Линия ▼</button>
                        <div class="menu-section-content">
                            <label>Стиль линии</label>
                            <select id="line-style" class="menu-button">
                                <option value="straight">Прямая</option>
                                <option value="curved">Кривая</option>
                                <option value="bezier">Линия Безье</option>
                                <option value="dashed">Пунктирная</option>
                                <option value="dotted">Точечная</option>
                            </select>
                            
                            <label>Цвет линии</label>
                            <input type="color" id="line-color" value="#666666" class="menu-button">
                            
                            <label>Толщина линии</label>
                            <input type="range" id="line-width" min="1" max="5" value="1" class="menu-button">
                        </div>
                    </div>

                    <!-- Глобальные настройки -->
                    <div class="menu-section">
                        <button class="menu-section-toggle">Карта ▼</button>
                        <div class="menu-section-content">
                            <label>Тип карты</label>
                            <select id="map-type">
                                <option value="mind">Ментальная карта</option>
                                <option value="tree">Дерево</option>
                                <option value="organization">Организационная</option>
                            </select>
                            
                            <label>Масштаб</label>
                            <input type="range" id="map-zoom" min="50" max="200" value="100">

                            <div class="toggle-container">
                                <label for="cascade-delete">Каскадное удаление узлов</label>
                                <input type="checkbox" id="cascade-delete">
                            </div>
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="action-btn" id="expand-all">Развернуть все</button>
                        <button class="action-btn" id="collapse-all">Свернуть все</button>
                    </div>
                </div>
                
                <div class="menu content-menu entry-point">
                    <div class="menu-section">
                        <button class="menu-section-toggle">Добавить блок ▼</button>
                        <div class="menu-section-content">
                            <div class="block-buttons">
                                <button class="block-btn" data-block="h1">H1</button>
                                <button class="block-btn" data-block="h2">H2</button>
                                <button class="block-btn" data-block="h3">H3</button>
                                <button class="block-btn" data-block="p">Абзац</button>
                                <button class="block-btn" data-block="ul">Список</button>
                                <button class="block-btn" data-block="ol">Нумерованный список</button>
                                <button class="block-btn" data-block="img">Изображение</button>
                            </div>
                        </div>
                    </div>

                    <div class="menu-section text-controls">
                        <button class="menu-section-toggle">Стили текста ▼</button>
                        <div class="menu-section-content">
                            <div class="style-group">
                                <label>Шрифт</label>
                                <select id="font-family">
                                    <option value="Arial">Arial</option>
                                    <option value="Times New Roman">Times New Roman</option>
                                    <option value="Courier New">Courier New</option>
                                </select>
                            </div>
                            <div class="style-group">
                                <label>Размер шрифта</label>
                                <input type="number" id="font-size" value="16" min="8" max="72">
                            </div>
                            <div class="style-group">
                                <label>Цвет текста</label>
                                <input type="color" id="text-color">
                            </div>
                            <div class="text-style-buttons">
                                <button id="bold-btn" class="style-btn" title="Жирный">B</button>
                                <button id="italic-btn" class="style-btn" title="Курсив">I</button>
                                <button id="underline-btn" class="style-btn" title="Подчёркнутый">U</button>
                            </div>
                        </div>
                    </div>

                    <div class="menu-section image-controls" style="display: none;">
                        <button class="menu-section-toggle">Настройки изображения ▼</button>
                        <div class="menu-section-content">
                            <div class="img-path">
                                <label for="img-path">Путь к изображению</label>
                                <input type="text" id="img-path">
                                <button id="img-select">Выбрать изображение</button>
                            </div>
                            <div class="img-size">
                                <label for="img-width">Ширина</label>
                                <input type="number" id="img-width" value="100" min="1">
                                <label for="img-height">Высота</label>
                                <input type="number" id="img-height" value="100" min="1">
                            </div>
                            <div class="img-position">
                                <label for="img-position">Положение</label>
                                <select id="img-position">
                                    <option value="left">Слева</option>
                                    <option value="right">Справа</option>
                                    <option value="top">Сверху</option>
                                    <option value="bottom">Снизу</option>
                                </select>
                            </div>
                            <button id="img-upload">Загрузить изображение</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</body>
</html>
